"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=4)}([function(t,e){!function(t){var e=function(e){return null!=e||e!=t},i=function(t,e){for(var i=a._callbacks[t],n=0;n<i.length;n++)i[n].apply(window,e)},n=function(t){for(var e=0,i=t.length-1;i>t.length-6;i--)e+=t[i];return e/5},a=window.Compass={method:t,watch:function(t){var e=++a._lastId;return a.init(function(i){if("phonegap"==i)a._watchers[e]=a._nav.compass.watchHeading(t);else if("webkitOrientation"==i){var n=function(e){t(e.webkitCompassHeading)};a._win.addEventListener("deviceorientation",n),a._watchers[e]=n}else if("orientationAndGPS"==i){var o,n=function(e){o=-e.alpha+a._gpsDiff,o<0?o+=360:o>360&&(o-=360),t(o)};a._win.addEventListener("deviceorientation",n),a._watchers[e]=n}}),e},unwatch:function(t){return a.init(function(e){"phonegap"==e?a._nav.compass.clearWatch(a._watchers[t]):("webkitOrientation"==e||"orientationAndGPS"==e)&&a._win.removeEventListener("deviceorientation",a._watchers[t]),delete a._watchers[t]}),a},needGPS:function(t){return a._callbacks.needGPS.push(t),a},needMove:function(t){return a._callbacks.needMove.push(t),a},noSupport:function(t){return!1===a.method?t():e(a.method)||a._callbacks.noSupport.push(t),a},init:function(t){return e(a.method)?void t(a.method):(a._callbacks.init.push(t),a._initing?void 0:(a._initing=!0,a._nav.compass?a._start("phonegap"):a._win.DeviceOrientationEvent?(a._checking=0,a._win.addEventListener("deviceorientation",a._checkEvent),setTimeout(function(){!1!==a._checking&&a._start(!1)},500)):a._start(!1),a))},_lastId:0,_watchers:{},_win:window,_nav:navigator,_callbacks:{init:[],noSupport:[],needGPS:[],needMove:[]},_initing:!1,_gpsDiff:t,_start:function(t){a.method=t,a._initing=!1,i("init",[t]),a._callbacks.init=[],!1===t&&i("noSupport",[]),a._callbacks.noSupport=[]},_checking:!1,_checkEvent:function(t){a._checking+=1;var i=!1;e(t.webkitCompassHeading)?a._start("webkitOrientation"):e(t.alpha)&&a._nav.geolocation?a._gpsHack():a._checking>1?a._start(!1):i=!0,i||(a._checking=!1,a._win.removeEventListener("deviceorientation",a._checkEvent))},_gpsHack:function(){var t=!0,o=[],r=[];i("needGPS");var s=function(t){o.push(t.alpha)};a._win.addEventListener("deviceorientation",s);var u=function(u){var c=u.coords;e(c.heading)&&(t&&(t=!1,i("needMove")),c.speed>1?(r.push(c.heading),r.length>=5&&o.length>=5&&(a._win.removeEventListener("deviceorientation",s),a._nav.geolocation.clearWatch(l),a._gpsDiff=n(r)+n(o),a._start("orientationAndGPS"))):r=[])},c=function(){a._win.removeEventListener("deviceorientation",s),a._start(!1)},l=a._nav.geolocation.watchPosition(u,c,{enableHighAccuracy:!0})}}}()},function(t,e){},function(t,e){},function(t,e,i){var n,a;!function(i,o){function r(){}r.TO_RAD=Math.PI/180,r.TO_DEG=180/Math.PI,r.PI_X2=2*Math.PI,r.PI_DIV4=Math.PI/4;var s=Object.create(r.prototype,{version:{value:"2.0.23"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,4}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},in:{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:r.prototype},extend:{value:function(t,e){for(var i in t)void 0!==s.prototype[i]&&!0!==e||("function"==typeof t[i]&&"function"==typeof t[i].bind?s.prototype[i]=t[i].bind(s):s.prototype[i]=t[i])}}});void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*r.TO_RAD}),void 0===Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return this*r.TO_DEG}),s.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(t){if("[object Array]"==Object.prototype.toString.call(t))return{longitude:t.length>=1?0:void 0,latitude:t.length>=2?1:void 0,elevation:t.length>=3?2:void 0};var e=function(e){var i;return e.every(function(e){return"object"!=(void 0===t?"undefined":_typeof(t))||(!t.hasOwnProperty(e)||function(){return i=e,!1}())}),i},i=e(["lng","lon","longitude"]),n=e(["lat","latitude"]),a=e(["alt","altitude","elevation","elev"]);return void 0!==n||void 0!==i||void 0!==a?{latitude:n,longitude:i,elevation:a}:void 0},getLat:function(t,e){return!0===e?t[this.getKeys(t).latitude]:this.useDecimal(t[this.getKeys(t).latitude])},latitude:function(t){return this.getLat.call(this,t)},getLon:function(t,e){return!0===e?t[this.getKeys(t).longitude]:this.useDecimal(t[this.getKeys(t).longitude])},longitude:function(t){return this.getLon.call(this,t)},getElev:function(t){return t[this.getKeys(t).elevation]},elevation:function(t){return this.getElev.call(this,t)},coords:function(t,e){var i={latitude:!0===e?t[this.getKeys(t).latitude]:this.useDecimal(t[this.getKeys(t).latitude]),longitude:!0===e?t[this.getKeys(t).longitude]:this.useDecimal(t[this.getKeys(t).longitude])},n=t[this.getKeys(t).elevation];return void 0!==n&&(i.elevation=n),i},ll:function(t,e){return this.coords.call(this,t,e)},validate:function(t){var e=this.getKeys(t);if(void 0===e||void 0===e.latitude||"undefined"===e.longitude)return!1;var i=t[e.latitude],n=t[e.longitude];return!(void 0===i||!this.isDecimal(i)&&!this.isSexagesimal(i))&&(!(void 0===n||!this.isDecimal(n)&&!this.isSexagesimal(n))&&(i=this.useDecimal(i),n=this.useDecimal(n),!(i<this.minLat||i>this.maxLat||n<this.minLon||n>this.maxLon)))},getDistance:function(t,e,i,n){i=Math.floor(i)||1,n=Math.floor(n)||0;var a,o,r,u,c,l,d,h=this.coords(t),g=this.coords(e),f=6378137,v=6356752.314245,m=1/298.257223563,p=(g.longitude-h.longitude).toRad(),M=Math.atan((1-m)*Math.tan(parseFloat(h.latitude).toRad())),_=Math.atan((1-m)*Math.tan(parseFloat(g.latitude).toRad())),y=Math.sin(M),x=Math.cos(M),b=Math.sin(_),w=Math.cos(_),L=p,D=100;do{var E=Math.sin(L),P=Math.cos(L);if(0===(l=Math.sqrt(w*E*(w*E)+(x*b-y*w*P)*(x*b-y*w*P))))return s.distance=0;a=y*b+x*w*P,o=Math.atan2(l,a),r=x*w*E/l,u=1-r*r,c=a-2*y*b/u,isNaN(c)&&(c=0);var k=m/16*u*(4+m*(4-3*u));d=L,L=p+(1-k)*m*r*(o+k*l*(c+k*a*(2*c*c-1)))}while(Math.abs(L-d)>1e-12&&--D>0);if(0===D)return NaN;var S=u*(f*f-v*v)/(v*v),R=1+S/16384*(4096+S*(S*(320-175*S)-768)),I=S/1024*(256+S*(S*(74-47*S)-128)),N=I*l*(c+I/4*(a*(2*c*c-1)-I/6*c*(4*l*l-3)*(4*c*c-3))),O=v*R*(o-N);if(O=O.toFixed(n),void 0!==this.elevation(t)&&void 0!==this.elevation(e)){var F=Math.abs(this.elevation(t)-this.elevation(e));O=Math.sqrt(O*O+F*F)}return this.distance=Math.round(O*Math.pow(10,n)/i)*i/Math.pow(10,n)},getDistanceSimple:function(t,e,i){i=Math.floor(i)||1;var n=Math.round(Math.acos(Math.sin(this.latitude(e).toRad())*Math.sin(this.latitude(t).toRad())+Math.cos(this.latitude(e).toRad())*Math.cos(this.latitude(t).toRad())*Math.cos(this.longitude(t).toRad()-this.longitude(e).toRad()))*this.radius);return s.distance=Math.floor(Math.round(n/i)*i)},getCenter:function(t){var e=t;if("object"===(void 0===t?"undefined":_typeof(t))&&!(t instanceof Array)){e=[];for(var i in t)e.push(this.coords(t[i]))}if(!e.length)return!1;var n,a,o,s=0,u=0,c=0;e.forEach(function(t){n=this.latitude(t).toRad(),a=this.longitude(t).toRad(),s+=Math.cos(n)*Math.cos(a),u+=Math.cos(n)*Math.sin(a),c+=Math.sin(n)},this);var l=e.length;return s/=l,u/=l,c/=l,a=Math.atan2(u,s),o=Math.sqrt(s*s+u*u),n=Math.atan2(c,o),{latitude:(n*r.TO_DEG).toFixed(6),longitude:(a*r.TO_DEG).toFixed(6)}},getBounds:function(t){if(!t.length)return!1;var e=this.elevation(t[0]),i={maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0};void 0!==e&&(i.maxElev=0,i.minElev=1/0);for(var n=0,a=t.length;n<a;++n)i.maxLat=Math.max(this.latitude(t[n]),i.maxLat),i.minLat=Math.min(this.latitude(t[n]),i.minLat),i.maxLng=Math.max(this.longitude(t[n]),i.maxLng),i.minLng=Math.min(this.longitude(t[n]),i.minLng),e&&(i.maxElev=Math.max(this.elevation(t[n]),i.maxElev),i.minElev=Math.min(this.elevation(t[n]),i.minElev));return i},getCenterOfBounds:function(t){var e=this.getBounds(t),i=e.minLat+(e.maxLat-e.minLat)/2,n=e.minLng+(e.maxLng-e.minLng)/2;return{latitude:parseFloat(i.toFixed(6)),longitude:parseFloat(n.toFixed(6))}},getBoundsOfDistance:function(t,e){var i,n,a=this.latitude(t),o=this.longitude(t),s=a.toRad(),u=o.toRad(),c=e/this.radius,l=s-c,d=s+c,h=this.maxLat.toRad(),g=this.minLat.toRad(),f=this.maxLon.toRad(),v=this.minLon.toRad();if(l>g&&d<h){var m=Math.asin(Math.sin(c)/Math.cos(s));i=u-m,i<v&&(i+=r.PI_X2),n=u+m,n>f&&(n-=r.PI_X2)}else l=Math.max(l,g),d=Math.min(d,h),i=v,n=f;return[{latitude:l.toDeg(),longitude:i.toDeg()},{latitude:d.toDeg(),longitude:n.toDeg()}]},isPointInside:function(t,e){for(var i=!1,n=-1,a=e.length,o=a-1;++n<a;o=n)(this.longitude(e[n])<=this.longitude(t)&&this.longitude(t)<this.longitude(e[o])||this.longitude(e[o])<=this.longitude(t)&&this.longitude(t)<this.longitude(e[n]))&&this.latitude(t)<(this.latitude(e[o])-this.latitude(e[n]))*(this.longitude(t)-this.longitude(e[n]))/(this.longitude(e[o])-this.longitude(e[n]))+this.latitude(e[n])&&(i=!i);return i},preparePolygonForIsPointInsideOptimized:function(t){for(var e=0,i=t.length-1;e<t.length;e++)this.longitude(t[i])===this.longitude(t[e])?(t[e].constant=this.latitude(t[e]),t[e].multiple=0):(t[e].constant=this.latitude(t[e])-this.longitude(t[e])*this.latitude(t[i])/(this.longitude(t[i])-this.longitude(t[e]))+this.longitude(t[e])*this.latitude(t[e])/(this.longitude(t[i])-this.longitude(t[e])),t[e].multiple=(this.latitude(t[i])-this.latitude(t[e]))/(this.longitude(t[i])-this.longitude(t[e]))),i=e},isPointInsideWithPreparedPolygon:function(t,e){for(var i=!1,n=this.longitude(t),a=this.latitude(t),o=0,r=e.length-1;o<e.length;o++)(this.longitude(e[o])<n&&this.longitude(e[r])>=n||this.longitude(e[r])<n&&this.longitude(e[o])>=n)&&(i^=n*e[o].multiple+e[o].constant<a),r=o;return i},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(t,e,i){return this.getDistance(t,e)<i},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(t,e){var i=this.longitude(e).toRad()-this.longitude(t).toRad(),n=Math.log(Math.tan(this.latitude(e).toRad()/2+r.PI_DIV4)/Math.tan(this.latitude(t).toRad()/2+r.PI_DIV4));return Math.abs(i)>Math.PI&&(i=i>0?-1*(r.PI_X2-i):r.PI_X2+i),(Math.atan2(i,n).toDeg()+360)%360},getBearing:function(t,e){return e.latitude=this.latitude(e),e.longitude=this.longitude(e),t.latitude=this.latitude(t),t.longitude=this.longitude(t),(Math.atan2(Math.sin(e.longitude.toRad()-t.longitude.toRad())*Math.cos(e.latitude.toRad()),Math.cos(t.latitude.toRad())*Math.sin(e.latitude.toRad())-Math.sin(t.latitude.toRad())*Math.cos(e.latitude.toRad())*Math.cos(e.longitude.toRad()-t.longitude.toRad())).toDeg()+360)%360},getCompassDirection:function(t,e,i){var n,a;switch(a="circle"==i?this.getBearing(t,e):this.getRhumbLineBearing(t,e),Math.round(a/22.5)){case 1:n={exact:"NNE",rough:"N"};break;case 2:n={exact:"NE",rough:"N"};break;case 3:n={exact:"ENE",rough:"E"};break;case 4:n={exact:"E",rough:"E"};break;case 5:n={exact:"ESE",rough:"E"};break;case 6:n={exact:"SE",rough:"E"};break;case 7:n={exact:"SSE",rough:"S"};break;case 8:n={exact:"S",rough:"S"};break;case 9:n={exact:"SSW",rough:"S"};break;case 10:n={exact:"SW",rough:"S"};break;case 11:n={exact:"WSW",rough:"W"};break;case 12:n={exact:"W",rough:"W"};break;case 13:n={exact:"WNW",rough:"W"};break;case 14:n={exact:"NW",rough:"W"};break;case 15:n={exact:"NNW",rough:"N"};break;default:n={exact:"N",rough:"N"}}return n.bearing=a,n},getDirection:function(t,e,i){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(t,e){return Object.keys(e).map(function(i){var n=this.getDistance(t,e[i]),a=Object.create(e[i]);return a.distance=n,a.key=i,a},this).sort(function(t,e){return t.distance-e.distance})},isPointInLine:function(t,e,i){return(this.getDistance(e,t,1,3)+this.getDistance(t,i,1,3)).toFixed(3)==this.getDistance(e,i,1,3)},isPointNearLine:function(t,e,i,n){return this.getDistanceFromLine(t,e,i)<n},getDistanceFromLine:function(t,e,i){var n=this.getDistance(e,t,1,3),a=this.getDistance(t,i,1,3),o=this.getDistance(e,i,1,3),r=Math.acos((n*n+o*o-a*a)/(2*n*o)),s=Math.acos((a*a+o*o-n*n)/(2*a*o));return r>Math.PI/2?n:s>Math.PI/2?a:Math.sin(r)*n},findNearest:function(t,e,i,n){i=i||0,n=n||1;var a=this.orderByDistance(t,e);return 1===n?a[i]:a.splice(i,n)},getPathLength:function(t){for(var e,i=0,n=0,a=t.length;n<a;++n)e&&(i+=this.getDistance(this.coords(t[n]),e)),e=this.coords(t[n]);return i},getSpeed:function(t,e,i){var n=i&&i.unit||"km";"mph"==n?n="mi":"kmh"==n&&(n="km");var a=s.getDistance(t,e),o=1*e.time/1e3-1*t.time/1e3,r=a/o*3600;return Math.round(r*this.measures[n]*1e4)/1e4},computeDestinationPoint:function(t,e,i,n){var a=this.latitude(t),o=this.longitude(t);n=void 0===n?this.radius:Number(n);var r=Number(e)/n,s=Number(i).toRad(),u=Number(a).toRad(),c=Number(o).toRad(),l=Math.asin(Math.sin(u)*Math.cos(r)+Math.cos(u)*Math.sin(r)*Math.cos(s)),d=c+Math.atan2(Math.sin(s)*Math.sin(r)*Math.cos(u),Math.cos(r)-Math.sin(u)*Math.sin(l));return d=(d+3*Math.PI)%(2*Math.PI)-Math.PI,{latitude:l.toDeg(),longitude:d.toDeg()}},convertUnit:function(t,e,i){if(0===e)return 0;if(void 0===e){if(null===this.distance)throw new Error("No distance was given");if(0===this.distance)return 0;e=this.distance}if(t=t||"m",i=null==i?4:i,void 0!==this.measures[t])return this.round(e*this.measures[t],i);throw new Error("Unknown unit for conversion.")},useDecimal:function(t){if("[object Array]"===Object.prototype.toString.call(t)){var e=this;return t=t.map(function(t){if(e.isDecimal(t))return e.useDecimal(t);if("object"==(void 0===t?"undefined":_typeof(t))){if(e.validate(t))return e.coords(t);for(var i in t)t[i]=e.useDecimal(t[i]);return t}return e.isSexagesimal(t)?e.sexagesimal2decimal(t):t})}if("object"===(void 0===t?"undefined":_typeof(t))&&this.validate(t))return this.coords(t);if("object"===(void 0===t?"undefined":_typeof(t))){for(var i in t)t[i]=this.useDecimal(t[i]);return t}if(this.isDecimal(t))return parseFloat(t);if(!0===this.isSexagesimal(t))return parseFloat(this.sexagesimal2decimal(t));throw new Error("Unknown format.")},decimal2sexagesimal:function(t){if(t in this.sexagesimal)return this.sexagesimal[t];var e=t.toString().split("."),i=Math.abs(e[0]),n=60*("0."+(e[1]||0)),a=n.toString().split(".");return n=Math.floor(n),a=(60*("0."+(a[1]||0))).toFixed(2),this.sexagesimal[t]=i+"° "+n+"' "+a+'"',this.sexagesimal[t]},sexagesimal2decimal:function(t){if(t in this.decimal)return this.decimal[t];var e=new RegExp(this.sexagesimalPattern),i=e.exec(t),n=0,a=0;i&&(n=parseFloat(i[2]/60),a=parseFloat(i[4]/3600)||0);var o=(parseFloat(i[1])+n+a).toFixed(8);return o="S"==i[7]||"W"==i[7]?parseFloat(-o):parseFloat(o),this.decimal[t]=o,o},isDecimal:function(t){return t=t.toString().replace(/\s*/,""),!isNaN(parseFloat(t))&&parseFloat(t)==t},isSexagesimal:function(t){return t=t.toString().replace(/\s*/,""),this.sexagesimalPattern.test(t)},round:function(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}}),void 0!==t&&void 0!==t.exports?(t.exports=s,"object"===(void 0===i?"undefined":_typeof(i))&&(i.geolib=s)):(n=[],void 0!==(a=function(){return s}.apply(e,n))&&(t.exports=a))}(this)},function(t,e,i){function n(t){if(p&&!(Math.floor(t)>=g-2&&Math.floor(t)<=g+2)){g=t;var e=u(t),i=Math.cos(e),n=Math.sin(e);l.setListenerOrientation(i,n,0,0,0,1)}}function a(t){p&&(o(),_=1/t)}function o(){if(p)for(var t=0;t<m.length;t++){var e=Geo.getBearing({latitude:f,longitude:v},{latitude:m[t].lat,longitude:m[t].long}),i=Geo.getDistance({latitude:f,longitude:v},{latitude:m[t].lat,longitude:m[t].long})*_,n=Math.cos(e)*i,a=Math.sin(e)*i;h[t].setPosition(n,a,0),console.log(n,a)}}function r(t){f=t.coords.latitude,v=t.coords.longitude,document.getElementById("lat").innerHTML=Geo.decimal2sexagesimal(f)+" N",document.getElementById("long").innerHTML=Geo.decimal2sexagesimal(v)+" E"}function s(){c=new(window.AudioContext||window.webkitAudioContext),l=new ResonanceAudio(c,{ambisonicOrder:1});for(var t=[],e=0;e<m.length;e++)d[e]=document.createElement("audio"),d[e].src=m[e].src,d[e].load(),d[e].loop=!0,d[e].crossOrigin="anonymous",t[e]=c.createMediaElementSource(d[e]),h[e]=l.createSource(),t[e].connect(h[e].input);l.output.connect(c.destination),p=!0}function u(t){return t*(Math.PI/180)}i(1),i(2),i(0),Geo=i(3);var c=void 0,l=void 0,d=[],h=[],g=0,f=31.77247675,v=35.21536082,m=[{lat:31.767436,long:35.215317,src:"./assets/song.wav"}],p=!1,M=!1,_=.02,y=function(){s();navigator.geolocation.watchPosition(r,function(t){alert("Cannot get location"),console.log(t)},{enableHighAccuracy:!0});document.getElementById("play").addEventListener("touchstart",function(t){t.target.classList.add("active")}),document.getElementById("play").addEventListener("touchend",function(t){t.target.classList.remove("active")}),document.getElementById("play").addEventListener("click",function(t){c.resume(),p&&(Compass.watch(function(t){document.getElementById("heading").innerHTML=Math.floor(t)+"°",n(t)}),M?(d.forEach(function(t){t.pause()}),M=!1,t.target.innerHTML="Play"):(o(),d.forEach(function(t){t.play()}),M=!0,t.target.innerHTML="Pause"))}),document.getElementById("dist").addEventListener("input",function(t){a(t.target.value)})};window.addEventListener("load",y)}]);